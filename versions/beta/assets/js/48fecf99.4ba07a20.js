"use strict";(self.webpackChunktypegoose_website=self.webpackChunktypegoose_website||[]).push([[2397],{4923:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"guides/migration/migrate-11","title":"Migrate to 11.0.0","description":"These are the changes made for 11.0.0 that are breaking or just important to know","source":"@site/../docs/guides/migration/migrate-11.md","sourceDirName":"guides/migration","slug":"/guides/migration/migrate-11","permalink":"/typegoose/versions/beta/docs/guides/migration/migrate-11","draft":false,"unlisted":false,"editUrl":"https://github.com/typegoose/typegoose/edit/beta/docs/../docs/guides/migration/migrate-11.md","tags":[],"version":"current","frontMatter":{"id":"migrate-11","title":"Migrate to 11.0.0"},"sidebar":"guides","previous":{"title":"Migrate to 12.0.0","permalink":"/typegoose/versions/beta/docs/guides/migration/migrate-12"},"next":{"title":"Migrate to 10.0.0","permalink":"/typegoose/versions/beta/docs/guides/migration/migrate-10"}}');var s=o(4848),i=o(8453);const r={id:"migrate-11",title:"Migrate to 11.0.0"},a=void 0,d={},c=[{value:"Requirements changed",id:"requirements-changed",level:2},{value:"Default class <code>FindOrCreate</code> has been removed",id:"default-class-findorcreate-has-been-removed",level:2},{value:"Notes",id:"notes",level:2},{value:"Mongoose 7 removed LeanDocument type",id:"mongoose-7-removed-leandocument-type",level:3}];function l(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"These are the changes made for 11.0.0 that are breaking or just important to know"}),"\n",(0,s.jsx)(t.admonition,{title:"Important, Read this first",type:"warning",children:(0,s.jsxs)(t.p,{children:["This Guide is written for migration from version ",(0,s.jsx)(t.code,{children:"10.3.3"})," to ",(0,s.jsx)(t.code,{children:"11.0.0"}),", for versions ",(0,s.jsx)(t.code,{children:">11.0.0 <12.0.0"}),", please consult the ",(0,s.jsx)(t.a,{href:"https://github.com/typegoose/typegoose/blob/master/CHANGELOG.md",children:"CHANGELOG"})]})}),"\n",(0,s.jsx)(t.h2,{id:"requirements-changed",children:"Requirements changed"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Mongoose ",(0,s.jsx)(t.code,{children:"7.2.0"})," or higher is now required"]}),"\n"]}),"\n",(0,s.jsxs)(t.h2,{id:"default-class-findorcreate-has-been-removed",children:["Default class ",(0,s.jsx)(t.code,{children:"FindOrCreate"})," has been removed"]}),"\n",(0,s.jsxs)(t.p,{children:["The default class ",(0,s.jsx)(t.code,{children:"FindOrCreate"})," (and by extension the type ",(0,s.jsx)(t.code,{children:"FindOrCreateResult"}),") have been removed, because originally the plugin ",(0,s.jsx)(t.code,{children:"mongoose-findorcreate"})," was incompatible with mongoose 7 (removal of callbacks)."]}),"\n",(0,s.jsxs)(t.p,{children:["Since the release of typegoose 11, ",(0,s.jsx)(t.code,{children:"mongoose-findorcreate"})," got updated to ",(0,s.jsx)(t.code,{children:"4.0.0"})," with support for mongoose 7, but typegoose will not be re-adding the default class."]}),"\n",(0,s.jsxs)(t.p,{children:["See ",(0,s.jsxs)(t.a,{href:"https://github.com/typegoose/typegoose-examples/tree/master/examples/plugin-findorcreate",children:[(0,s.jsx)(t.code,{children:"typegoose-examples"})," ",(0,s.jsx)(t.code,{children:"examples/plugin-findorcreate"})]})," for how to use it with typegoose 11 (or higher)."]}),"\n",(0,s.jsx)(t.h2,{id:"notes",children:"Notes"}),"\n",(0,s.jsx)(t.h3,{id:"mongoose-7-removed-leandocument-type",children:"Mongoose 7 removed LeanDocument type"}),"\n",(0,s.jsxs)(t.p,{children:["Mongoose 7 removed the ",(0,s.jsx)(t.code,{children:"LeanDocument"})," type, meaning any usage of that type (for example in type tests) has to be converted."]}),"\n",(0,s.jsxs)(t.p,{children:["Also note that the type returned is not fully correct, because it returns the type as ",(0,s.jsx)(t.code,{children:"Class"}),"(instance) instead of a POJO type, the reason being that typegoose passes in the full class as the interface and mongoose not doing any special operations on the type."]})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8453:(e,t,o)=>{o.d(t,{R:()=>r,x:()=>a});var n=o(6540);const s={},i=n.createContext(s);function r(e){const t=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);